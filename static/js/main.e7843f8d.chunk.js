(this.webpackJsonpteamtomat=this.webpackJsonpteamtomat||[]).push([[0],{339:function(e,t,a){e.exports=a(542)},344:function(e,t,a){},541:function(e,t,a){},542:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),i=(a(344),a(78)),l=a(18),s=a(22),u=a(24),m=a(578),d=a(615),p=a(580),f=a(582),E=a(50),b=a(584),g=a(583),h=a(295),O=a.n(h),v=a(66),y=Object(m.a)((function(e){return Object(d.a)({root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1}})}));var j=Object(u.d)(Object(l.b)((function(e){return{auth:e.firebase.auth}})),Object(s.firestoreConnect)())((function(e){var t=e.auth,a=e.firebase,n=y({}),c=Object(v.g)();return r.a.createElement("div",{className:n.root},r.a.createElement(p.a,{position:"static"},r.a.createElement(f.a,null,r.a.createElement(g.a,{edge:"start",className:n.menuButton,color:"inherit","aria-label":"menu",onClick:function(e){e.preventDefault(),c.goBack()}},r.a.createElement(O.a,null)),r.a.createElement(E.a,{variant:"h6",className:n.title},"TEAMTOMATO"),r.a.createElement(b.a,{color:"inherit",onClick:function(e){e.preventDefault(),t.isEmpty?c.push("/login"):(a.logout(),c.push("/"))}},t.isEmpty?"Login":"Logout"))))})),k=a(153),T=function(e){Object(n.useEffect)((function(){document.title="Website name | "+e.title}));e.title;var t=Object(k.a)(e,["title"]);return r.a.createElement(v.b,t)};var C=Object(l.b)((function(e){return{isLoggedIn:!e.firebase.auth.isEmpty}}))((function(e){var t=e.component,a=e.isLoggedIn,n=Object(k.a)(e,["component","isLoggedIn"]);return r.a.createElement(T,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(v.a,{to:{pathname:"/login",state:{from:e.location}}})}}))})),S=a(109),N=a(12),w=a(9),D=a(611);function R(e){var t=e.children,a=e.open,n=e.value,c=r.a.useRef(null);return r.a.useEffect((function(){c.current&&c.current.update()})),r.a.createElement(D.a,{PopperProps:{popperRef:c},open:a,enterTouchDelay:0,placement:"top",title:n},t)}var A=a(587),x=a(588),I=a(591),_=a(593),M=a(592),L=a(613),B=a(147),W=a.n(B),F=a(614),P=a(313),K=a(590),z=a(155),Y=function(e){return function(t){try{t({type:"ADD_TOAST",toast:e})}catch(a){t({type:"ADD_TOAST_ERROR"},a)}}},U=Object(m.a)((function(e){return Object(d.a)({card:{minWidth:330,maxWidth:330,margin:e.spacing(3)},avatar:{backgroundColor:z.a[500]},progressRing:{margin:"10px auto 10px 60px"},progressRingCircle:{transition:"0.35s stroke-dashoffset",transform:"rotate(-90deg)",transformOrigin:"50% 50%"}})})),q=function(e){var t=e.toDate();return(t.getDate()>10?t.getDate():"0"+t.getDate())+"."+(t.getMonth()>10?t.getMonth():"0"+t.getMonth())+"."+t.getFullYear()};var G=Object(l.b)((function(e,t){var a=e.firestore.data,n=e.firebase.auth;return{userName:a.teams&&a.teams[t.task.userId]&&a.teams[t.task.userId].name||n.displayName,userPhoto:n.photoURL}}),(function(e){return{deleteTask:function(t){return e(function(e){return function(t,a,n){n().collection("tasks").doc(e).delete().then((function(){t({type:"DELETE_TASK",taskId:e}),t(Y({message:"Task deleted",severity:"success"}))})).catch((function(e){t({type:"DELETE_TASK_ERROR",err:e}),t(Y({message:"Can't delete task",severity:"error"}))}))}}(t))},setTotalTime:function(t,a){return e(function(e,t){return function(a,n,r){r().update({collection:"tasks",doc:e},{totalTime:t}).then((function(){a({type:"SET_TASK_TIME",taskId:e})})).catch((function(e){a({type:"SET_TASK_TIME_ERROR",err:e})}))}}(t,a))},setTaskDone:function(t,a){return e(function(e,t){return function(a,n,r){r().update({collection:"tasks",doc:e},{done:t}).then((function(){a({type:"SET_TASK_DONE",taskId:e})})).catch((function(e){a({type:"SET_TASK_DONE_ERROR",err:e})}))}}(t,a))}}}))((function(e){var t=e.task,a=e.userName,c=e.userPhoto,o=e.deleteTask,i=e.setTotalTime,l=e.setTaskDone,s=e.taskId,u=Object(n.useState)(0),m=Object(N.a)(u,2),d=m[0],p=m[1],f=Object(n.useState)(0),h=Object(N.a)(f,2),O=h[0],v=h[1],y=Object(n.useState)(0),j=Object(N.a)(y,2),k=j[0],T=j[1],C=Object(n.useState)(),S=Object(N.a)(C,2),w=S[0],D=S[1],B=Object(n.useState)(20),z=Object(N.a)(B,2),Y=z[0],G=z[1],H=Object(n.useState)(null),V=Object(N.a)(H,2),J=V[0],X=V[1],$=U({}),Q=Boolean(J);function Z(){w?(clearInterval(w),D(null)):function(){if(t.done)return;var e=Y;0===O&&0===k||(e=60*O+k);v(Math.floor(e/60)),T(Math.round(e%60));var a=setInterval((function(){var n=172*Math.PI-e/Y*(172*Math.PI);p(n),v(Math.floor(e/60)),T(Math.round(e%60)),-1===--e&&(ee(),clearInterval(a),i(s,t.totalTime+Y))}),1e3);D(a)}()}function ee(){clearInterval(w),D(null),v(0),T(0),p(0)}return r.a.createElement(A.a,{className:$.card,key:s},r.a.createElement(x.a,{avatar:r.a.createElement(L.a,{"aria-label":"user",className:$.avatar,src:c},"U"),action:r.a.createElement("div",null,r.a.createElement(g.a,{"aria-label":"settings",onClick:function(e){X(e.currentTarget)}},r.a.createElement(W.a,null)),r.a.createElement(P.a,{id:"long-menu",anchorEl:J,keepMounted:!0,open:Q,onClose:function(){X(null)},PaperProps:{style:{width:300}}},r.a.createElement(K.a,{onClick:function(){l(s,!t.done),ee(),X(null)}},"Mark as ",t.done?"undone":"done"),r.a.createElement(K.a,{onClick:function(){o(s),X(null)}},"Delete Task"),r.a.createElement("div",{style:{padding:16}},r.a.createElement(E.a,{gutterBottom:!0},"Set timer"),r.a.createElement(F.a,{ValueLabelComponent:R,"aria-label":"custom thumb label",defaultValue:20,min:5,max:30,onChange:function(e,t){G(t)}})))),title:a,subheader:q(t.timestamp)}),r.a.createElement(I.a,{onClick:Z},r.a.createElement("svg",{className:$.progressRing,width:"200",height:"200"},r.a.createElement("g",null,r.a.createElement("circle",{className:$.progressRingCircle,stroke:t.done?"grey":"rgb(0,0,255)",strokeWidth:"4",fill:"transparent",r:86,cx:"100",cy:"100",strokeDasharray:172*Math.PI+" "+172*Math.PI,strokeDashoffset:d}),r.a.createElement("text",{x:"100",y:"100",textAnchor:"middle",fontFamily:"Verdana",fontSize:"15",fill:"black"},O<10?"0"+O:O,":",k<10?"0"+k:k)))),r.a.createElement(M.a,null,r.a.createElement(E.a,{gutterBottom:!0,variant:"h5",component:"h2",color:t.done?"textSecondary":"textPrimary"},t.taskName),r.a.createElement(E.a,{component:"p",color:t.done?"textSecondary":"primary"},"Total time: ",t.totalTime),r.a.createElement(E.a,{variant:"body2",color:"textSecondary",component:"p"},t.description)),r.a.createElement(_.a,null,r.a.createElement(b.a,{size:"small",color:"primary",onClick:Z,disabled:t.done},w?"Stop":"Start"),r.a.createElement(b.a,{size:"small",color:"primary",onClick:ee,disabled:t.done},"Clear")))})),H=a(604),V=a(594),J=Object(m.a)((function(e){return Object(d.a)({card:{width:330,maxHeight:280,margin:e.spacing(3)},media:{height:0,paddingTop:"56.25%"},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:z.a[500]},textField:{marginTop:18,marginBottom:5}})}));var X=Object(l.b)(null,(function(e){return{createTask:function(t){return e(function(e){return function(t,a,n){var r=n();console.log("action"),console.log(e),e.userId||(e.userId=a().firebase.auth.uid),r.collection("tasks").add(Object(w.a)({},e,{totalTime:0,timestamp:new Date,done:!1})).then((function(){t({type:"CREATE_TASK",task:e}),t(Y({message:"Task ".concat(e.taskName," created"),severity:"success"}))})).catch((function(e){t({type:"CREATE_TASK_ERROR"},e),t(Y({message:"Can't create task",severity:"error"}))}))}}(t))},toast:function(t){return e(Y(t))}}}))((function(e){var t=e.createTask,a=e.toast,c=e.teamId,o=Object(n.useState)({taskName:"",description:"",userId:c}),i=Object(N.a)(o,2),l=i[0],s=i[1],u=Object(n.useState)({taskName:"",description:"",userId:""}),m=Object(N.a)(u,2),d=m[0],p=m[1];Object(n.useEffect)((function(){s(Object(w.a)({},l,{userId:c}))}),[c]);var f=J({});function g(e){switch(e.preventDefault(),e.target.name){case"taskName":s(Object(w.a)({},l,{taskName:e.target.value})),""===e.target.value?p(Object(w.a)({},d,{taskName:"Enter name! "})):e.target.value.length>20?p(Object(w.a)({},d,{taskName:"Name should be less than 20 symbols! "})):p(Object(w.a)({},d,{taskName:""}));break;case"description":s(Object(w.a)({},l,{description:e.target.value})),""===e.target.value?p(Object(w.a)({},d,{description:"Enter description! "})):e.target.value.length>50?p(Object(w.a)({},d,{description:"Name should be less than 50 symbols! "})):p(Object(w.a)({},d,{description:""}));break;default:return}}return r.a.createElement(A.a,{className:f.card},r.a.createElement(M.a,null,r.a.createElement(H.a,{id:"taskName",name:"taskName",label:"Task Name",required:!0,error:Boolean(d.taskName),value:l.taskName,onChange:g}),d.taskName&&r.a.createElement(V.a,{id:"component-error-text"},d.taskName),r.a.createElement(H.a,{className:f.textField,id:"description",name:"description",label:"Description",required:!0,multiline:!0,rows:2,error:Boolean(d.description),value:l.description,onChange:g}),d.description&&r.a.createElement(V.a,{id:"component-error-text"},d.description),r.a.createElement(E.a,{component:"h4",paragraph:!0,align:"center",color:"primary"},c&&"Task will be created in selected group")),r.a.createElement(_.a,null,r.a.createElement(b.a,{size:"small",color:"primary",onClick:function(e){if(e.preventDefault(),!d.taskName&&!d.description){if(!l.taskName||!l.description)return p(Object(w.a)({},d,{taskName:l.taskName?"":"Enter name! ",description:l.description?"":"Enter description! "})),void a({message:"Can't create task.",severity:"error"});t(l),s(Object(w.a)({},l,{taskName:"",description:""}))}}},"Create"),r.a.createElement(b.a,{size:"small",color:"secondary",onClick:function(){s(Object(w.a)({},l,{taskName:"",description:""}))}},"Cancel")))})),$=a(543),Q=a(300),Z=a.n(Q),ee=a(595),te=a(596),ae=a(303),ne=a.n(ae),re=a(304),ce=a.n(re),oe=a(305),ie=a.n(oe),le=a(306),se=a.n(le),ue=a(597),me=a(205),de=a.n(me),pe=a(301),fe=a(65),Ee=a.n(fe);var be=Object(l.b)(null,(function(e){return{deleteTeam:function(t){return e(function(e){return function(t,a,n){n().update({collection:"teams",doc:e},{users:a().firestore.data.teams[e].users.filter((function(e){return e!==a().firebase.auth.uid}))}).then((function(){t({type:"DELETE_TEAM",teamId:e}),t(Y({message:"You're deleted from team",severity:"success"}))})).catch((function(e){t({type:"DELETE_TEAM_ERROR",err:e}),t(Y({message:"Can't delete you from team",severity:"error"}))}))}}(t))},toast:function(t){return e(Y(t))}}}))((function(e){var t=e.team,a=e.OnClickMyTeam,n=e.deleteTeam,c=e.selected,o=e.toast,i=r.a.useState(null),l=Object(N.a)(i,2),s=l[0],u=l[1],m=Object(v.g)();return t?r.a.createElement($.a,{id:t.id,button:!0,onClick:function(){return a(t.id)},key:t.id,selected:c},r.a.createElement(ee.a,null,r.a.createElement(ne.a,null)),r.a.createElement(te.a,{primary:t.name}),r.a.createElement(ue.a,null,r.a.createElement(g.a,{edge:"end","aria-label":"comments",onClick:function(e){u(e.currentTarget)}},r.a.createElement(W.a,null)),r.a.createElement(P.a,{id:"simple-menu",anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:function(){u(null)}},r.a.createElement(K.a,{onClick:function(){Z()(t.id),o({message:"ID of ".concat(t.name," is copied to buffer."),severity:"info"}),u(null)}},r.a.createElement(ee.a,null,r.a.createElement(ce.a,{fontSize:"small"})),"Invite to team"),r.a.createElement(K.a,{onClick:function(){u(null),m.push("teammates/".concat(t.id))}},r.a.createElement(ee.a,null,r.a.createElement(ie.a,{fontSize:"small"})),"Show teammates"),r.a.createElement(K.a,{onClick:function(){n(t.id),u(null)}},r.a.createElement(ee.a,null,r.a.createElement(se.a,{fontSize:"small"})),"Delete me from team")))):r.a.createElement($.a,null,r.a.createElement(E.a,null,"team is loading..."))}));var ge=Object(l.b)(null,(function(e){return{createTeam:function(t){return e(function(e){return function(t,a,n){n().collection("teams").add(Object(w.a)({},e,{users:[a().firebase.auth.uid]})).then((function(){t({type:"CREATE_TEAM",team:e}),t(Y({message:"Team ".concat(e.name," is created"),severity:"success"}))})).catch((function(a){t({type:"CREATE_TEAM_ERROR"},a),t(Y({message:"Can't create team ".concat(e.name),severity:"error"}))}))}}(t))},addTeam:function(t){return e(function(e){return function(){var t=Object(pe.a)(de.a.mark((function t(a,n,r){var c;return de.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=r(),[].push(n().firebase.auth.uid),c.update({collection:"teams",doc:e},{users:fe.firestore.FieldValue.arrayUnion(n().firebase.auth.uid)}).then((function(){a({type:"ADD_TEAM",teamId:e}),a(Y({message:"You're added to team",severity:"success"}))})).catch((function(e){a({type:"ADD_TEAM_ERROR",err:e}),a(Y({message:"Can't add you to team",severity:"error"}))}));case 4:case"end":return t.stop()}}),t)})));return function(e,a,n){return t.apply(this,arguments)}}()}(t))}}}))((function(e){var t,a=e.OnClickMyTeam,c=e.teamList,o=e.createTeam,i=e.addTeam,l=Object(n.useState)({name:""}),s=Object(N.a)(l,2),u=s[0],m=s[1],d=Object(n.useState)(""),p=Object(N.a)(d,2),f=p[0],g=p[1],h=Object(n.useState)(""),O=Object(N.a)(h,2),v=O[0],y=O[1],j=function(e){y(e===v?"":e),a(e)};return c&&(t=c.map((function(e){return r.a.createElement(be,{team:e,OnClickMyTeam:j,selected:v===e.id,key:e.id})}))),r.a.createElement(r.a.Fragment,null,c?t:r.a.createElement($.a,null,r.a.createElement(E.a,null,"team list loading")),r.a.createElement($.a,null,r.a.createElement(H.a,{id:"createteam",name:"createteam",label:"Team name",required:!0,multiline:!0,rows:1,value:u.name,onChange:function(e){e.preventDefault(),m(Object(w.a)({},u,{name:e.target.value}))}}),r.a.createElement(b.a,{size:"small",color:"primary",onClick:function(e){e.preventDefault(),o(u),m({name:""})}},"Create")),r.a.createElement($.a,null,r.a.createElement(H.a,{id:"addteam",name:"addteam",label:"Team Id",required:!0,value:f,onChange:function(e){e.preventDefault(),g(e.target.value)}}),r.a.createElement(b.a,{size:"small",color:"primary",onClick:function(e){e.preventDefault(),i(f),g("")}},"Add")))})),he=a(150),Oe=a(2),ve=a(25),ye=a(610),je=a(598),ke=a(589),Te=a(599),Ce=a(307),Se=a.n(Ce),Ne=a(308),we=a.n(Ne),De=a(309),Re=a.n(De),Ae=a(156),xe=a.n(Ae),Ie=a(310),_e=a.n(Ie),Me=Object(m.a)((function(e){return Object(d.a)({root:{display:"flex"},appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(w.a)({display:"flex",alignItems:"center"},e.mixins.toolbar,{justifyContent:"flex-end"}),divider:{marginBottom:5},content:{flexGrow:1,display:"flex",flexDirection:"row",flexWrap:"wrap",padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0},card:{maxWidth:345,margin:e.spacing(3)}})}));var Le=Object(u.d)(Object(l.b)((function(e){return e.firestore.ordered.tasks?{tasks:e.firestore.ordered.teams?e.firestore.ordered.tasks.concat(Object(he.flatten)(e.firestore.ordered.teams.map((function(t){return e.firestore.ordered["tasks".concat(t.id)]?e.firestore.ordered["tasks".concat(t.id)]:[]})))):e.firestore.ordered.tasks,teams:e.firestore.ordered.teams,userName:e.firebase.auth.displayName,userId:e.firebase.auth.uid}:{userId:e.firebase.auth.uid}})),Object(s.firestoreConnect)((function(e){var t=e.userId;return t?[{collection:"teams",where:["users","array-contains",t]}]:[]})),Object(s.firestoreConnect)((function(e){var t=e.userId;return t?[{collection:"tasks",where:["userId","==",t]}]:[]})),Object(s.firestoreConnect)((function(e){var t=e.teams;return t?t.map((function(e){return e.id})).map((function(e,t){return{collection:"tasks",where:["userId","==",e],storeAs:"tasks".concat(e)}})):[]})))((function(e){var t=e.firebase,a=e.tasks,c=e.teams,o=e.userName,i=Object(n.useState)(null),l=Object(N.a)(i,2),s=l[0],u=l[1],m=Object(n.useState)(""),d=Object(N.a)(m,2),b=d[0],h=d[1],O=r.a.useState(null),v=Object(N.a)(O,2),y=v[0],j=v[1],k=Object(n.useState)(!0),T=Object(N.a)(k,2),C=T[0],w=T[1],D=Object(n.useState)(""),R=Object(N.a)(D,2),A=R[0],x=R[1],I=Boolean(y),_=Me({}),M=Object(ve.a)();return r.a.createElement("div",{className:_.root},r.a.createElement(je.a,null),r.a.createElement(p.a,{position:"fixed",className:Object(Oe.a)(_.appBar,Object(S.a)({},_.appBarShift,C))},r.a.createElement(f.a,null,r.a.createElement(g.a,{color:"inherit","aria-label":"open drawer",onClick:function(){w(!0)},edge:"start",className:Object(Oe.a)(_.menuButton,C&&_.hide)},r.a.createElement(Se.a,null)),r.a.createElement(E.a,{variant:"h6",noWrap:!0},"TEAM TOMATO"))),r.a.createElement(ye.a,{className:_.drawer,variant:"persistent",anchor:"left",open:C,classes:{paper:_.drawerPaper}},r.a.createElement("div",{className:_.drawerHeader},r.a.createElement(g.a,{onClick:function(){w(!1)}},"ltr"===M.direction?r.a.createElement(we.a,null):r.a.createElement(Re.a,null))),r.a.createElement(Te.a,null),r.a.createElement(ke.a,null,r.a.createElement(E.a,{component:"h4",paragraph:!0,align:"center",color:"primary"},"YOUR PROFILE"),r.a.createElement($.a,{button:!0,onClick:function(e){j(e.currentTarget)}},r.a.createElement(ee.a,null,r.a.createElement(_e.a,null)),r.a.createElement(te.a,{primary:o})),r.a.createElement(P.a,{id:"long-menu",anchorEl:y,keepMounted:!0,open:I,onClose:function(){j(null)},PaperProps:{style:{width:200}}},r.a.createElement(K.a,{onClick:function(){j(null),t.logout()}},"Log Out")),r.a.createElement(K.a,{button:!0,onClick:function(){"Today"===A?(u(null),x("")):(u(new Date),x("Today"))},key:"Today",selected:"Today"===A},r.a.createElement(ee.a,null,r.a.createElement(xe.a,null)),r.a.createElement(te.a,{primary:"Today"})),r.a.createElement(K.a,{button:!0,onClick:function(){"Yesterday"===A?(u(null),x("")):(u(new Date(Date.now()-864e5)),x("Yesterday"))},key:"Yesterday",selected:"Yesterday"===A},r.a.createElement(ee.a,null,r.a.createElement(xe.a,null)),r.a.createElement(te.a,{primary:"Yesterday"})),r.a.createElement(K.a,{id:"Any time",button:!0,onClick:function(){u(null),x("")},key:"Any time"},r.a.createElement(ee.a,null,r.a.createElement(xe.a,null)),r.a.createElement(te.a,{primary:"Any time"})),r.a.createElement(Te.a,{className:_.divider}),r.a.createElement(E.a,{component:"h4",paragraph:!0,align:"center",color:"primary"},"TEAMS"),r.a.createElement(ge,{OnClickMyTeam:function(e){h(b!==e?e:"")},teamList:c}))),r.a.createElement("main",{className:Object(Oe.a)(_.content,Object(S.a)({},_.contentShift,C))},r.a.createElement(X,{teamId:b}),r.a.createElement("div",{className:_.drawerHeader}),a?a.filter((function(e){if(b&&e.userId!==b)return!1;if(!s)return!0;var t=e.timestamp.toDate();return t.getFullYear()===s.getFullYear()&&t.getMonth()===s.getMonth()&&t.getDate()===s.getDate()})).sort((function(e,t){return t.timestamp.toDate().getTime()-e.timestamp.toDate().getTime()})).map((function(e,t){return r.a.createElement(G,{taskId:e.id,key:e.id,task:e})})):r.a.createElement(E.a,{paragraph:!0},"Loading...")))})),Be=a(601),We=a(609),Fe=a(603),Pe=a(602),Ke=a(151),ze=a.n(Ke),Ye=a(600),Ue=Object(m.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var qe=Object(u.d)(s.withFirebase,Object(l.b)((function(e){return{auth:e.firebase.auth}})))((function(e){var t=e.firebase,a=e.auth,c=e.history,o=Object(n.useState)(""),i=Object(N.a)(o,2),l=i[0],u=i[1],m=Object(n.useState)(""),d=Object(N.a)(m,2),p=d[0],f=d[1];function g(e){e.preventDefault(),Object(s.isEmpty)(a)?l&&p?t.login({email:l,password:p}).then((function(){console.log("go main"),c.push("/login")})):Object(s.isEmpty)(a)?t.login({provider:"google",type:"popup"}).then((function(){c.push("/")})):t.logout():t.logout()}function h(e){switch(e.target.name){case"email":u(e.target.value);break;case"password":f(e.target.value);break;default:return}}a.uid&&c.push("/");var O=Ue();return r.a.createElement(Ye.a,{component:"main",maxWidth:"xs"},r.a.createElement(je.a,null),r.a.createElement("div",{className:O.paper},r.a.createElement(L.a,{className:O.avatar},r.a.createElement(ze.a,null)),r.a.createElement(E.a,{component:"h1",variant:"h5"},"Log in"),r.a.createElement("form",{className:O.form,noValidate:!0},r.a.createElement(H.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:l,onChange:h}),r.a.createElement(H.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:p,onChange:h}),r.a.createElement(Be.a,{control:r.a.createElement(We.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:O.submit,disabled:!Object(s.isLoaded)(a),onClick:g},Object(s.isEmpty)(a)?"Sign In":"Log out"),r.a.createElement(b.a,{type:"button",fullWidth:!0,variant:"contained",color:"secondary",className:O.submit,disabled:!Object(s.isLoaded)(a),onClick:g},"LogIn with Google"),r.a.createElement(Pe.a,{container:!0},r.a.createElement(Pe.a,{item:!0,xs:!0},r.a.createElement(Fe.a,{href:"#",variant:"body2"},"Forgot password?")),r.a.createElement(Pe.a,{item:!0},r.a.createElement(Fe.a,{href:"/signup",variant:"body2"},"Don't have an account? Sign Up"))))))})),Ge=Object(m.a)((function(e){return{"@global":{body:{backgroundColor:e.palette.common.white}},paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(3)},submit:{margin:e.spacing(3,0,2)}}}));var He=Object(u.d)(s.withFirebase,Object(l.b)((function(e){return{auth:e.firebase.auth}})))((function(e){var t=e.firebase,a=(e.auth,Object(n.useState)("")),c=Object(N.a)(a,2),o=c[0],i=c[1],l=Object(n.useState)(""),s=Object(N.a)(l,2),u=s[0],m=s[1],d=Object(n.useState)(""),p=Object(N.a)(d,2),f=p[0],g=p[1],h=Object(n.useState)(""),O=Object(N.a)(h,2),v=O[0],y=O[1],j=Object(n.useState)(""),k=Object(N.a)(j,2),T=k[0],C=k[1];function S(e){switch(e.target.name){case"email":i(e.target.value);break;case"password":m(e.target.value);break;case"firstName":g(e.target.value);break;case"lastName":y(e.target.value);break;default:return}}var w=Ge();return r.a.createElement(Ye.a,{component:"main",maxWidth:"xs"},r.a.createElement(je.a,null),r.a.createElement("div",{className:w.paper},r.a.createElement(L.a,{className:w.avatar},r.a.createElement(ze.a,null)),r.a.createElement(E.a,{component:"h1",variant:"h5"},"Sign up"),r.a.createElement("form",{className:w.form,noValidate:!0},r.a.createElement(Pe.a,{container:!0,spacing:2},r.a.createElement(Pe.a,{item:!0,xs:12,sm:6},r.a.createElement(H.a,{autoComplete:"fname",name:"firstName",variant:"outlined",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0,value:f,onChange:S})),r.a.createElement(Pe.a,{item:!0,xs:12,sm:6},r.a.createElement(H.a,{variant:"outlined",required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"lname",value:v,onChange:S})),r.a.createElement(Pe.a,{item:!0,xs:12},r.a.createElement(H.a,{variant:"outlined",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:o,onChange:S})),r.a.createElement(Pe.a,{item:!0,xs:12},r.a.createElement(H.a,{variant:"outlined",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:u,onChange:S})),r.a.createElement(Pe.a,{item:!0,xs:12},r.a.createElement(Be.a,{control:r.a.createElement(We.a,{value:"allowExtraEmails",color:"primary"}),label:"I want to receive inspiration, marketing promotions and updates via email."}))),r.a.createElement(E.a,{component:"h5",variant:"h6",color:"secondary"},T&&T.message),r.a.createElement(b.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:w.submit,onClick:function(e){e.preventDefault(),console.log("fetchdata"),t.createUser({email:o,password:u},{username:f+" "+v,email:o}).then((function(e){return console.log(e)})).catch((function(e){C(e)}))}},"Sign Up"),r.a.createElement(b.a,{type:"button",fullWidth:!0,variant:"contained",color:"secondary",className:w.submit,onClick:function(e){return e.preventDefault(),t.login({provider:"google",type:"popup"})}},"SignUp with Google"),r.a.createElement(Pe.a,{container:!0,justify:"flex-end"},r.a.createElement(Pe.a,{item:!0},r.a.createElement(Fe.a,{href:"/login",variant:"body2"},"Already have an account? Log in"))))))})),Ve=a(605),Je=Object(m.a)((function(e){return{card:{minWidth:250,maxWidth:330,margin:e.spacing(3),padding:10},avatar:{backgroundColor:z.a[500],marginBottom:5},container:{padding:10},button:{marginTop:10}}})),Xe=Object(u.d)(Object(l.b)((function(e){return{teams:e.firestore.ordered.teams,users:e.firestore.ordered.teams&&Object(he.flatten)(e.firestore.ordered.teams[0].users.map((function(t){return e.firestore.ordered["users".concat(t)]?e.firestore.ordered["users".concat(t)]:[]})))}})),Object(s.firestoreConnect)((function(e){return e?[{collection:"teams",doc:e.match.params.id}]:[]})),Object(s.firestoreConnect)((function(e){var t=e.teams;return t?t[0].users.map((function(e,t){return{collection:"users",doc:e,storeAs:"users".concat(e)}})):[]})))((function(e){var t=e.teams,a=e.users,n=e.history,c=Je({}),o=a&&a.map((function(e){return r.a.createElement(A.a,{className:c.card,key:e.id},r.a.createElement(x.a,{avatar:r.a.createElement(L.a,{className:c.avatar},e.name[0]),title:r.a.createElement(E.a,{variant:"h5",component:"h2"},e.name),subheader:r.a.createElement(E.a,null,e.email)}))}));return r.a.createElement(Ve.a,{className:c.container,display:"flex",flexDirection:"column",alignItems:"center"},r.a.createElement(E.a,{variant:"h4",noWrap:!0,align:"center"},t?t[0].name:"LOADING"),r.a.createElement(Ve.a,{display:"flex",flexDirection:"row"},o),r.a.createElement(b.a,{type:"button",variant:"contained",color:"primary",className:c.button,onClick:function(){n.push("/")}},"Go Back to main page"))})),$e=Object(m.a)((function(e){return{container:{padding:10},button:{marginTop:10}}})),Qe=function(e){var t=e.history,a=$e();return r.a.createElement(Ve.a,{className:a.container,display:"flex",flexDirection:"column",alignItems:"center"},r.a.createElement(E.a,{variant:"h4",noWrap:!0,align:"center"},"PAGE NOT FOUND! SORRY ",r.a.createElement("span",{role:"img","aria-label":"sad"},"\ud83d\ude22")),r.a.createElement(b.a,{type:"button",variant:"contained",color:"primary",className:a.button,onClick:function(){t.push("/")}},"Go Back to main page"))};var Ze=Object(l.b)((function(e){return{auth:e.firebase.auth}}))((function(e){return e.auth.isLoaded?r.a.createElement(v.d,null,r.a.createElement(C,{path:"/",exact:!0,component:Le,title:"Main"}),r.a.createElement(T,{path:"/login",component:qe,title:"Login"}),r.a.createElement(T,{path:"/signup",component:He,title:"Sign up"}),r.a.createElement(T,{path:"/teammates/:id",component:Xe,title:"Teammates"}),r.a.createElement(T,{component:Qe,title:"Not found"})):r.a.createElement("div",null,"loading...")})),et=a(612),tt=a(606);function at(e){return r.a.createElement(tt.a,Object.assign({elevation:6,variant:"filled"},e))}var nt=Object(m.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)},zIndex:1e3}}}));var rt=Object(l.b)((function(e){return{toasts:e.toasts.toasts}}))((function(e){var t=e.toasts,a=nt({}),n=r.a.useState(!1),c=Object(N.a)(n,2),o=c[0],i=c[1],l=r.a.useState({message:"",severity:"success"}),s=Object(N.a)(l,2),u=s[0],m=s[1];r.a.useEffect((function(){t&&t.length>0&&(m(t[t.length-1]),i(!0))}),[t]);var d=function(e,t){"clickaway"!==t&&i(!1)};return r.a.createElement("div",{className:a.root},r.a.createElement(et.a,{open:o,autoHideDuration:2e3,onClose:d},r.a.createElement(at,{onClose:d,severity:u.severity},u&&u.message)))})),ct=a(311),ot={apiKey:"AIzaSyDB464_icNem-DnDnJNDYxpce6oxaXsK9E",authDomain:"teamtomato-c00e4.firebaseapp.com",databaseURL:"https://teamtomato-c00e4.firebaseio.com",projectId:"teamtomato-c00e4",storageBucket:"teamtomato-c00e4.appspot.com",messagingSenderId:"910619689905",appId:"1:910619689905:web:3878cb98b3974232"},it=(a(505),{});var lt={};var st={};var ut=a(312),mt={toasts:[]};var dt=a(90);Ee.a.initializeApp(ot),Ee.a.firestore();var pt=[ct.a.withExtraArgument(dt.getFirestore)],ft=Object(u.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:it,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_AUTHENTICATED":return Object(w.a)({},e,{authentificated:!0});default:return Object(w.a)({},e)}},task:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"CREATE_TASK":return Object(w.a)({},e,{createTaskError:null});case"CREATE_TASK_ERROR":return Object(w.a)({},e,{createTaskError:t.err});case"DELETE_TASK":return Object(w.a)({},e,{deleteTaskError:null});case"DELETE_TASK_ERROR":return Object(w.a)({},e,{deleteTaskError:t.err});case"SET_TASK_TIME":return Object(w.a)({},e,{setTaskError:null});case"SET_TASK_TIME_ERROR":return Object(w.a)({},e,{setTaskError:t.err});case"SET_TASK_DONE":return Object(w.a)({},e,{setTaskError:null});case"SET_TASK_DONE_ERROR":return Object(w.a)({},e,{setTaskError:t.err});default:return Object(w.a)({},e)}},team:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"DELETE_TEAM":return Object(w.a)({},e,{deleteTeamErrors:null});case"DELETE_TEAM_ERROR":return Object(w.a)({},e,{deleteTeamErrors:t.err});case"CREATE_TEAM":return Object(w.a)({},e,{createTeamErrors:null});case"CREATE_TEAM_ERROR":return Object(w.a)({},e,{createTeamErrors:t.err});case"ADD_TEAM":return Object(w.a)({},e,{addTeamErrors:null});case"ADD_TEAM_ERROR":return Object(w.a)({},e,{addTeamErrors:t.err});default:return Object(w.a)({},e)}},toasts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TOAST":return Object(w.a)({},e,{toasts:[].concat(Object(ut.a)(e.toasts),[t.toast]),addToastError:null});case"ADD_TOAST_ERROR":return Object(w.a)({},e,{addToastError:t.err});default:return Object(w.a)({},e)}},firebase:s.firebaseReducer,firestore:dt.firestoreReducer}),Et=Object(u.e)(ft,{},Object(u.d)(u.a.apply(void 0,pt),Object(dt.reduxFirestore)(Ee.a))),bt=(a(541),{firebase:fe,config:{userProfile:"users",useFirestoreForProfile:!0},dispatch:Et.dispatch,createFirestoreInstance:dt.createFirestoreInstance});var gt=function(){return r.a.createElement(l.a,{store:Et},r.a.createElement(i.a,null,r.a.createElement(s.ReactReduxFirebaseProvider,bt,r.a.createElement(j,null),r.a.createElement(Ze,null),r.a.createElement(rt,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(gt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[339,1,2]]]);
//# sourceMappingURL=main.e7843f8d.chunk.js.map